{"version":3,"file":"user-dropdown.component.js","sourceRoot":"","sources":["user-dropdown.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Http, Headers, Response, RequestOptions } from '@angular/http';\nimport {LocalStorageService} from 'ng2-webstorage';\nimport {Idle, DEFAULT_INTERRUPTSOURCES} from 'ng2-idle/core';\nimport {MerchConstant} from '../../../../app/MerchAppConstant';\n\n@Component({\n  moduleId: module.id,\n  selector: 'user-dropdown',\n  templateUrl: 'user-dropdown.component.html',\n  styleUrls: ['user-dropdown.component.css']\n})\nexport class UserDropdownComponent implements OnInit {\n  \n  private _webapi: string = MerchConstant.WebAPI_ENDPOINT;\n  public userName:string;\n\n  \n\n  constructor(public http: Http, public localSt: LocalStorageService, public idle: Idle) {\n     idle.setIdle(1200);\n    idle.setTimeout(5);\n    idle.setInterrupts(DEFAULT_INTERRUPTSOURCES);\n\n\n    idle.onTimeout.subscribe(() => {\n      console.log('Timeout');\n      window.location.href = \"/logout.html\";\n    });\n\n   idle.watch();\n  }\n\n  ngOnInit() {\n    this.checkUserAuth();\n  }\n\n\n checkUserAuth(): void {\n        this.WebAPIPostCall().subscribe(res => {\n                var d: any = res;\n                if (d.UserInfo.IsValid == 1)\n                {\n                  this.localSt.store('UserGSN', d.UserInfo.GSN);\n                  this.localSt.store('UserName', d.UserInfo.Name);\n                  this.localSt.store('UserEmail', d.UserInfo.Email);  \n                  this.userName = d.UserInfo.Name;\n\n                    console.log(this.localSt.retrieve('UserGSN'));\n                    console.log(this.localSt.retrieve('UserName'));\n                    console.log(this.localSt.retrieve('UserEmail'));\n                }\n                else{\n                    console.log(\"User is not valid\");\n                }                 \n               \n            },\n            error => {\n                if (error.status == 401 || error.status == 404) {\n                }\n            });  \n       }\n\n  WebAPIPostCall()\n      {\n        return this.http.get(this._webapi + 'api/Merc/CheckAuthentication/', {withCredentials:true})\n                      .map(response => <any>(<Response>response).json());\n      }\n}\n"]}