{"version":3,"file":"merchsetupmain.component.js","sourceRoot":"","sources":["merchsetupmain.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, Output, EventEmitter, ViewChild } from '@angular/core';\nimport {CORE_DIRECTIVES} from '@angular/common';\nimport { MerchlistComponent } from '../merchlist';\nimport { MerchdetailComponent } from '../merchdetail';\nimport { AddmerchComponent } from '../addmerch';\nimport { DispserviceService } from '../../../services/dispservice.service';\nimport {MerchConstant} from '../../../../app/MerchAppConstant';\nimport { MerchInfo, RouteData, MerchGroup} from '../MerchSetupClass';\nimport { AddmerchpopupComponent } from '../addmerchpopup';\nimport {Subscription} from 'rxjs/Subscription';\nimport { HeadernavService } from '../../../services/headernav.service';\nimport { SpinnerComponent } from '../../../common/spinner';\n\n@Component({\n    moduleId: module.id,\n    selector: 'app-merchsetupmain',\n    templateUrl: 'merchsetupmain.component.html',\n    styleUrls: ['merchsetupmain.component.css'],\n    directives: [CORE_DIRECTIVES, MerchlistComponent, MerchdetailComponent, AddmerchComponent, SpinnerComponent],\n    providers: [DispserviceService, HeadernavService]\n})\nexport class MerchsetupmainComponent implements OnInit {\n\n    private _webapi: string = MerchConstant.WebAPI_ENDPOINT;\n    private selectedMerchGroupID: number = 0;\n    private SaveMsg: boolean = false;\n    item: MerchGroup = new MerchGroup();\n    subscription: Subscription;\n\n    public MerchInfoList: Array<MerchInfo> = [];\n    public routesList: Array<any> = [];\n    public selMerchInfo: MerchInfo;\n    public isRequesting: boolean;\n\n    private listIndex: number = 0;\n    @Output() refreshList = new EventEmitter();\n    @Output() cancelDetail = new EventEmitter();\n\n    @Output() merchSelected = new EventEmitter();\n    @Output() merchListSelected = new EventEmitter();\n    private selDefaultRoute: RouteData;\n\n    //set the selected Merch from the Merch list pop up\n    setselectedMerch($event) {\n        this.getNewMerchDetailByGSN($event.$event.newMerch);\n    }\n\n    setListselectedMerch($event) {\n        this.listIndex = $event.ListIndex;\n        this.SaveMsg = false;\n        this.getMerchDetailByGSN($event.merchInfo);\n    }\n\n    //Refresh the Merch list left hand side and the Merch lookup list after save the Merch\n    refreshMerchList($event) {\n        if ($event.ReturnStatus == 1)\n            this.SaveMsg = true;\n        else\n            this.SaveMsg = false;\n        this.getMerchSetUpContainer(false, $event.NewMerchInfo.GSN);\n    }\n\n    setAddedMerchIndexInList(newGSN) {\n        for (var i = 0; i < this.MerchInfoList.length; i++) {\n            if (this.MerchInfoList[i][\"GSN\"] == newGSN) {\n                this.selMerchInfo = this.MerchInfoList[i];\n                this.listIndex = i;\n                break;\n            }\n        }\n    }\n\n    cancelDetailMerch($event) {\n        if (this.MerchInfoList.length > 0) {\n            this.listIndex = 0;\n        }\n        else {\n            this.selMerchInfo = null;\n        }\n    }\n\n    constructor(private dispService: DispserviceService, public navService: HeadernavService) { }\n\n    private stopRefreshing() {\n        this.isRequesting = false;\n    }\n\n    ngOnInit() {\n        this.subscription = this.navService.navItem$\n            .subscribe(item => {\n                this.item = item;\n                if (this.item != null || this.item != undefined)\n                    this.loadMerchData(item);\n            }\n            );\n    }\n\n    loadMerchData(item) {\n        this.item = item;\n        this.getMerchSetUpContainer(true, '');\n        this.initalizeMerchDetail();\n    }\n\n    initalizeMerchDetail() {\n        this.selDefaultRoute = new RouteData();\n        this.selDefaultRoute.RouteID = -1;\n        this.selDefaultRoute.RouteName = 'No Default Route';\n        this.SaveMsg = false;\n    }\n\n    getNewMerchDetailByGSN(newMerch: any) {\n        this.selMerchInfo = newMerch;\n        this.selMerchInfo.Mon = false;\n        this.selMerchInfo.Tues = false;\n        this.selMerchInfo.Wed = false;\n        this.selMerchInfo.Thu = false;\n        this.selMerchInfo.Fri = false;\n        this.selMerchInfo.Sat = false;\n        this.selMerchInfo.Sun = false;\n        this.selMerchInfo.Phone = '';\n        this.selMerchInfo.DefaultRouteID = -1;\n\n        this.selDefaultRoute = new RouteData();\n        this.selDefaultRoute.RouteID = -1;\n        this.selDefaultRoute.RouteName = 'No Default Route';\n        this.SaveMsg = false;\n    }\n\n    getMerchDetailByGSN(merch: any) {\n        this.isRequesting = true;\n        this.dispService.set(this._webapi + 'api/Merc/GetMerchDetailContainerByGSN/' + merch.GSN);\n        this.dispService.get()\n            .subscribe(res => {\n                var d: any = res.json();\n                this.selMerchInfo = d.MerchUser;\n                this.selDefaultRoute = d.Route;\n            },\n            () => this.stopRefreshing(),\n            () => this.stopRefreshing()\n            );\n    }\n\n    getMerchSetUpContainer(isLoadSelected, newAddedGSN) {\n        this.isRequesting = true;\n        this.dispService.set(this._webapi + 'api/Merc/GetMerchSetupContainer/');\n        var MerchListInput: any = { SAPBranchID: this.item.SAPBranchID, MerchGroupID: this.item.MerchGroupID }\n        this.dispService.post(JSON.stringify(MerchListInput), true)\n            .subscribe(res => {\n                var d: any = res;\n                this.MerchInfoList = d.MerchUsers;\n                this.routesList = d.Routes;\n                if (isLoadSelected) {\n                    this.selMerchInfo = d.MerchUser;\n                    this.selDefaultRoute = d.Route;\n                }\n                else {\n                    this.setAddedMerchIndexInList(newAddedGSN);\n                }\n            },\n            () => this.stopRefreshing(),\n            () => this.stopRefreshing()\n            );\n\n    }\n}\n"]}